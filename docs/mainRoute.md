# Корневые эндпоинты API
**Здесь располагаются все эндпоинты, являющиеся общими и не относящиеся ни к одному из частей бекенда.**

---

## `GET /`
Основной эндпоинт API, возвращает информацию о версии API и текущем билде.

### Тело ответа
```json
{
    "message": "Привет! Я здесь, чтобы сказать, что все работает!",
    "main_site": "https://pplbandage.ru",
    "docs": "https://github.com/PPLBandage/pplbandage_backend/blob/main/README.md",
    "version": {
        "route": "v1",
        "build": {
            "sha": "a507c11...",
            "date": "2025-01-15T12:00:00Z",
            "message": "commit message"
        }
    }
}
```

---

## `GET /ping`
Делает ping запрос на сервер. Не имеет ограничений по частоте запросов. Максимально быстро возвращает ответ от сервера с кодом `200`.

### Тело ответа
```json
{
    "message": "pong"
}
```

---

## `GET /ping/discord`
Проверяет доступность систем Discord (API и CDN). Результат кэшируется на 3 минуты.

### Тело ответа
```json
{
    "message": "Discord systems operational"
}
```

### Возможные ошибки
- **503** - Discord API или CDN недоступны

---

## `GET /sitemap.xml`
`Content-Type: text/xml`  
Возвращает актуальную карту сайта в формате `xml` для индекса поисковых систем. Содержит основные страницы сайта, а также все публичные повязки и профили авторов.

### Пример карты сайта
```xml
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc>https://pplbandage.ru/</loc>
        <priority>1</priority>
    </url>
    <url>
        <loc>https://pplbandage.ru/workshop</loc>
        <priority>0.8</priority>
    </url>
    <url>
        <loc>https://pplbandage.ru/workshop/vehwm5</loc>
        <priority>0.6</priority>
    </url>
</urlset>
```

---

## `POST /feedback`
<sub>Weak Auth optional</sub>  
Отправляет обратную связь от пользователя в Telegram группу администрации.

### Ограничения
- **1 запрос в минуту**

### Тело запроса
| Поле      | Описание             | Тип данных | Обязательный |
| --------- | -------------------- | ---------- | :----------: |
| `content` | Текст обратной связи | `string`   |      Да      |
| `anonym`  | Анонимная отправка   | `boolean`  |     Нет      |

### Особенности
Если передан токен сессии и параметр `anonym` не установлен в `true`, сообщение будет содержать имя и ссылку на профиль отправителя.

---

## `POST /error-report`
Отправляет отчет об ошибке клиента в Telegram группу администрации. Запросы от ботов игнорируются.

### Ограничения
- **5 запросов в минуту**

### Тело запроса
| Поле      | Описание        | Тип данных | Обязательный |
| --------- | --------------- | ---------- | :----------: |
| `content` | Описание ошибки | `string`   |      Да      |

### Особенности
Автоматически включает информацию о User-Agent клиента в отчет.