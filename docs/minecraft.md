# Враппер над официальным API Mojang

### `GET /skin/<nickname/UUID>`  
**Возвращает скин по никнейму или UUID.**

**Пример JSON-ответа:**  
```json
{
  "skin": "string",
  "cape": "string",
  "slim": boolean
}
```

- `skin` содержит скин в формате `base64`  
- `cape` содержит плащ в формате `base64`  
- `slim` содержит логическое значение, указывающее тип скина  

> [!NOTE]  
> Если у запрашиваемого игрока нет плаща, поле `cape` будет пустой строкой.

---

### `GET /head/<nickname/UUID>`  
**Возвращает голову игрока в виде изображения**  
`Content-Type: image/png`

Скин для этого запроса будет извлечен из кэша, если он действителен. Для ускорения обработки таких запросов API отдельно кэширует голову игрока для более эффективного повторного использования.

---

### `GET /head/<nickname/UUID>/svg?pixel_width=50`  
**Возвращает голову игрока в формате изображения `svg`**  
`Content-Type: image/svg+xml`  
Параметр запроса `pixel_width` определяет размер каждого пикселя в итоговом изображении головы. Значение по умолчанию — `50`.

> [!NOTE]  
> Результат этого эндпоинта не кэшируется отдельно, а генерируется из кэшированного скина.

---

### `GET /cape/<nickname/UUID>`  
**Возвращает плащ игрока в виде изображения**  
`Content-Type: image/png`

Плащ, так же как и скин, кэшируется отдельно для каждого игрока, обеспечивая более быстрый ответ API.

> [!NOTE]  
> Если у игрока нет плаща или он не установлен, API вернет ошибку `404` с телом `{ message: 'No cape on this profile' }`.

---

### `GET /main-page-skin`
<sub>Weak Auth optional</sub>  
**Возвращает скин для рендеринга на главной странице**
`Content-Type: image/png`

Если пользователь авторизован и имеет подключенный Minecraft профиль, возвращает его скин. В противном случае возвращает случайный скин из кэша.

### Заголовки ответа
- `X-name` - URL-encoded никнейм игрока
- `X-slim` - тип скина (true/false)

### Особенности
Этот эндпоинт используется для динамического отображения скинов на главной странице сайта.

---

### `GET /suggest?q=<fragment>&take=<number>&page=<number>`  
**Возвращает список скинов, чьи профили содержат запрашиваемый фрагмент в никнеймах**  
`Content-Type: application/json`

Этот эндпоинт ищет все кэшированные скины, содержащие запрашиваемый фрагмент в никнеймах.  
**Описание параметров запроса:**

| Параметр | Описание                         |  Ожидаемый тип  | Значение по умолчанию |
| -------- | -------------------------------- | :-------------: | :-------------------: |
| q        | Фрагмент ника для поиска         |     строка      |          ""           |
| take     | Количество никнеймов на странице | число (integer) |          20           |
| page     | Номер страницы                   | число (integer) |           0           |

**Пример JSON-ответа:**
```json
{
  "requested_fragment": "string",
  "data": [
    {
      "name": "string",
      "uuid": "string",
      "head": "string"
    }
  ],
  "total_count": 1,
  "next_page": 1
}
```

- `requested_fragment` Содержит запрашиваемый фрагмент. Всегда совпадает с `<fragment>` в query.
- `data` Содержит список совпадающих никнеймов.
  - `name` Содержит никнейм профиля.
  - `uuid` Содержит UUID профиля (без дефисов).
  - `head` Содержит изображение головы игрока в формате `base64`.
- `total_count` Содержит общее количество совпадений.
- `next_page` Указывает номер следующей страницы. Если текущая страница последняя, это поле будет содержать номер текущей страницы.
