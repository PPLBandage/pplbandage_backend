# Аватары
**API для получения аватаров пользователей из различных источников.**

---

## Общая информация

Система аватаров позволяет получать изображения профилей пользователей из различных подключенных OAuth провайдеров:
- **Discord** - аватар из Discord
- **Minecraft** - голова из скина Minecraft
- **Google** - фото профиля Google
- **Twitch** - аватар из Twitch
- **Telegram** - фото профиля Telegram

Все эндпоинты возвращают изображения в формате `image/png`.

> [!NOTE]
> Эти эндпоинты не требуют авторизации и доступны публично.

---

## `GET /avatars/:uid`
Получить предпочитаемый аватар пользователя.

`Content-Type: image/png`

### URL параметры
| Имя   | Описание                      | Тип данных |
| ----- | ----------------------------- | ---------- |
| `uid` | Snowflake ID пользователя     | `string`   |

### Ответ
- **200** - возвращает PNG изображение аватара
- **307 Redirect** - перенаправление на `/icon.png` если аватар не найден

### Особенности
Возвращает аватар из источника, выбранного пользователем в настройках (`preferred_avatar`). Если предпочитаемый источник недоступен, используется следующий доступный в порядке приоритета:
1. Discord
2. Minecraft
3. Google
4. Twitch
5. Telegram

---

## `GET /avatars/:uid/discord`
Получить Discord аватар пользователя.

`Content-Type: image/png`

### URL параметры
| Имя   | Описание                      | Тип данных |
| ----- | ----------------------------- | ---------- |
| `uid` | Snowflake ID пользователя     | `string`   |

### Особенности
Возвращает аватар из Discord CDN. Если у пользователя не подключен Discord или нет аватара, вернется дефолтное изображение Discord.

---

## `GET /avatars/:uid/minecraft`
Получить Minecraft голову пользователя.

`Content-Type: image/png`

### URL параметры
| Имя   | Описание                      | Тип данных |
| ----- | ----------------------------- | ---------- |
| `uid` | Snowflake ID пользователя     | `string`   |

### Особенности
Возвращает рендер головы из скина Minecraft (8x8 пикселей с верхней части скина). Если профиль Minecraft не подключен, вернется дефолтная голова Steve.

---

## `GET /avatars/:uid/google`
Получить Google фото профиля пользователя.

`Content-Type: image/png`

### URL параметры
| Имя   | Описание                      | Тип данных |
| ----- | ----------------------------- | ---------- |
| `uid` | Snowflake ID пользователя     | `string`   |

### Особенности
Возвращает фото профиля из Google аккаунта. Изображение кэшируется для оптимизации.

---

## `GET /avatars/:uid/twitch`
Получить Twitch аватар пользователя.

`Content-Type: image/png`

### URL параметры
| Имя   | Описание                      | Тип данных |
| ----- | ----------------------------- | ---------- |
| `uid` | Snowflake ID пользователя     | `string`   |

### Особенности
Возвращает аватар из Twitch CDN.

---

## `GET /avatars/:uid/telegram`
Получить Telegram фото профиля пользователя.

`Content-Type: image/png`

### URL параметры
| Имя   | Описание                      | Тип данных |
| ----- | ----------------------------- | ---------- |
| `uid` | Snowflake ID пользователя     | `string`   |

### Особенности
Возвращает фото профиля из Telegram.

---

## Кэширование

Все аватары кэшируются на стороне сервера для оптимизации производительности. Кэш автоматически обновляется при:
- Обновлении профиля пользователя
- Переподключении OAuth провайдера
- Ручном обновлении через эндпоинт `/users/@me/connections/<provider>/cache/purge` (для Minecraft)

---

## Примеры использования

### HTML
```html
<img src="https://pplbandage.ru/api/v1/avatars/236188357351178344" alt="User Avatar">
<img src="https://pplbandage.ru/api/v1/avatars/236188357351178344/minecraft" alt="Minecraft Head">
```

### Markdown
```markdown
![User Avatar](https://pplbandage.ru/api/v1/avatars/236188357351178344)
```
